DROP TRIGGER IF EXISTS UPD_INSERT_MOD ON MODULES;
CREATE OR REPLACE FUNCTION upd_mod()
RETURNS TRIGGER AS
$$
BEGIN
	UPDATE COURSE set NUM_MODULES=NUM_MODULES+1 where COURSE_ID=NEW.PARENT_COURSE;
    RETURN NEW;
END;
$$
LANGUAGE plpgsql;

CREATE TRIGGER UPD_INSERT_MOD
AFTER INSERT ON MODULES
FOR EACH ROW
EXECUTE FUNCTION upd_mod();